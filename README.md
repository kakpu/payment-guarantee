# 代弁実行書類取込・確認アプリ

地銀オペレーターが本人確認書類を取り込み、AI OCRで抽出した情報を確認・修正し、代弁実行システムへ連携するためのアプリケーションです。

## 機能

### MVP機能
- **書類アップロード**: マイナンバーカード、運転免許証の画像をアップロード
- **OCR情報抽出**: 氏名、生年月日、住所を自動抽出（現在は手動入力、将来的にOCR API統合予定）
- **確認・修正UI**: 左側に書類画像、右側に抽出結果を表示し、編集可能
- **確認OK/差戻し**: 書類の承認または差戻し処理
- **履歴管理**: 操作者、操作日時、変更内容を記録
- **ダッシュボード**: 処理状況を可視化

### 将来機能
- AI OCR API統合（Google Cloud Vision, AWS Textract等）
- 権限管理マスター（ロール別アクセス制御）
- 日次バッチ連携機能
- 画像拡大・回転機能の強化
- 書類間整合チェック

## 技術スタック

- **フロントエンド**: React + TypeScript + Tailwind CSS + Vite
- **バックエンド**: Supabase (Database, Authentication, Storage)
- **データベース**: PostgreSQL (Supabase)
- **認証**: Supabase Auth (Email/Password)
- **ストレージ**: Supabase Storage

## セットアップ

### 1. 依存関係のインストール

\`\`\`bash
npm install
\`\`\`

### 2. 環境変数の設定

プロジェクトには既にSupabaseの環境変数が設定されています。

### 3. 開発サーバーの起動

\`\`\`bash
npm run dev
\`\`\`

### 4. ビルド

\`\`\`bash
npm run build
\`\`\`

## 使い方

### 1. アカウント作成
- 初回アクセス時にアカウントを作成
- メールアドレスとパスワード（6文字以上）を入力

### 2. 書類アップロード
- 「書類アップロード」ページで書類種別を選択
- 画像ファイルを選択してアップロード

### 3. 書類確認
- 「書類一覧」で確認待ちの書類を表示
- 書類をクリックして詳細ページへ
- 左側の画像を確認しながら、右側の情報を編集
- 「確認OK」で承認、「差戻し」で却下

### 4. ダッシュボード
- 総書類数、確認待ち、確認済み、差戻しの統計を表示
- 処理済み率をグラフで可視化

## データベース構造

### テーブル一覧
- **documents**: 書類情報（ID、種別、画像URL、ステータス）
- **document_data**: OCR抽出データ（氏名、生年月日、住所）
- **document_history**: 操作履歴（操作者、アクション、変更内容）
- **batch_exports**: バッチ連携履歴（実行日時、ステータス）
- **batch_export_items**: バッチ連携詳細（書類ID）

### ステータス
- `uploaded`: アップロード完了
- `ocr_processing`: OCR処理中
- `ocr_completed`: OCR完了
- `confirmed`: 確認済み
- `rejected`: 差戻し

## セキュリティ

- Row Level Security (RLS) を全テーブルで有効化
- ユーザーは自分の書類のみアクセス可能
- ストレージも同様にRLSで保護
- 認証はSupabase Authで管理

## 今後の拡張予定

1. **OCR API統合**: Google Cloud Vision APIやAWS Textractとの統合
2. **バッチ連携機能**: 確認済み書類を代弁実行システムへ自動連携
3. **権限管理**: オペレーター、管理者、監査閲覧専用のロール管理
4. **高度なUI**: 画像拡大・回転、書類種別ごとの追加項目
5. **エクスポート機能**: CSV、PDFでの出力

## ライセンス

MIT
